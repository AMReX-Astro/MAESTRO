
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Intro
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Introduction}

Modules for Experiments in Stellar Astrophysics ({\tt MESA}) is a
collection of open source, robust and efficient modules developed for
a wide range of applications in computational stellar
astrophysics. The modules include macroscopic and microscopic physics
such as nuclear reaction rates, opacity, equation of state, element
diffusion data and atmosphere boundary conditions in addition to
numerical routines. This document describes how to link the {\tt MESA}
modules to an outside program such as {\tt MAESTRO}\footnote{This
  interface work was done by Ryan Orvedahl---questions (and credit)
  should be directed to him}.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Setup MESA
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Setting Up {\tt MESA}}

To install {\tt MESA}, download the source code from the {\tt MESA} website, 
{\tt http://mesa.sourceforge.net}. Check the website for the latest version, 
which is 4219 with the writing of this document. The codes and algorithms 
discussed here were created when the current version of {\tt MESA} was 
version 4088. Between versions 4088 and 4219, there are minor changes that 
will cause some of the included routines to crash. To download the source code 
associated with version 4088, use the following command:
\begin{lstlisting}[language=bash,mathescape=false]
  svn co -r 4088 http://mesa.svn.sourceforge.net/svnroot/mesa/trunk mesa
\end{lstlisting}
This will download the source into a directory called {\tt mesa} located 
in the directory where this command was run. This step might take some time 
($\sim$10 min depending on the internet connection) possibly because the 
final {\tt mesa} directory will take up roughly 2.2 GB.

Rich Townsend has developed a Software Development Kit (SDK) to help install 
{\tt MESA} called {\tt MESASDK}. The SDK will install certain software 
packages that {\tt MESA} uses and it will also change the {\tt PATH} 
environment variable such that these programs become the default. A tarball 
of the SDK software and indepth instructions for its use are available on 
Townsend's website:
\begin{lstlisting}[language=html,mathescape=false]
  http://www.astro.wisc.edu/~townsend/static.php?ref=mesasdk
\end{lstlisting}
The instructions in this document do not use the SDK in order to avoid 
automatically changing the {\tt PATH} variable.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Setup without SDK
%%%%%%%%%%%%%%%%%%
\subsection{Setup {\tt MESA} Without {\tt MESASDK}}
\label{sec:woSDK}

%-------------------------------------------------------------------------
\subsubsection{Environment Variables (NOT using SDK)}
A few environment variables need to be set (commands are shown for the 
Bourne shell):
\begin{enumerate}
\item Set location of {\tt mesa}: 
{\tt export MESA\_DIR=<absolute-path-to-mesa-directory>}

\item Set OpenMP number of threads: {\tt export OMP\_NUM\_THREADS=n}, a suggested value is the number of cores in the computer
\end{enumerate}

%-------------------------------------------------------------------------
\subsubsection{Modify the Makefile (NOT using SDK)}
The main makefile that contains compiler information including flags is 
located in the {\tt mesa/utils} directory and is called 
{\tt makefile\_header\_non\_mesasdk}. Open it and change the following:
\begin{enumerate}
\item Compilers: First change the compilers labeled {\tt CC} (C compiler) 
and {\tt FC} (Fortran compiler) to the compilers of your choice ({\tt MESA} 
defaults are {\tt gcc} and {\tt ifort}).

\item {\tt UTILS\_ISNAN}: Leave this as {\tt utils\_isnan\_okay}, if {\tt MESA} 
complains upon compiling the {\tt mesa/utils} module, then change it to 
{\tt utils\_isnan\_nope}.

\item {\tt BLAS} and {\tt LAPACK}: Set the location of {\tt LAPACK} and 
{\tt BLAS} provided with the {\tt MESA} source tree using the following 
definitions:
\begin{lstlisting}[language=make,mathescape=false,upquote=true]
  WHICH_LAPACK = USE_SRCS
  LOAD_LAPACK = -lmesalapack
  WHICH_BLAS = USE_SRCS
  LOAD_BLAS = -lmesablas
  MKL_INCLUDE =
\end{lstlisting}

\item {\tt PGPLOT}: Set the variable {\tt USE\_PGPLOT} to {\tt NO} and set 
the variable {\tt LOAD\_PGPLOT} to be empty on the line corresponding to 
the compiler that was chosen. The default for {\tt gcc} and {\tt ifort} is 
{\tt YES}, but for any other compiler the default is {\tt NO}. {\tt PGPLOT} 
controls the pop up images that are used in {\tt mesa/star} (1D stellar 
evolution code). 

\item {\tt USE\_SE}: Set the variable {\tt USE\_SE} to {\tt NO} and set both 
{\tt LOAD\_SE} and {\tt INCLUDE\_SE} to be empty. {\tt SE} is a library of 
formats used for writing/reading data in stellar evolution codes.

\item Compiler Flags: Installing {\tt MESA} without OpenMP will result in a 
failed install. {\tt MESA} is capable of being compiled in serial, but it 
must happen after the initial install. If not using {\tt gcc} or {\tt ifort} 
it will be necessary to enter all of the relevant compiler flags.
\end{enumerate}

All {\tt MESA} modules have a makefile that includes the main makefile named 
{\tt makefile\_header}. The file that was just edited was named 
{\tt makefile\_header\_non\_mesasdk} and so the name must be changed in order 
for the edits to take effect. This can be done as follows:
\begin{lstlisting}[language=bash,mathescape=false]
  cp makefile_header_non_mesasdk makefile_header
\end{lstlisting}

At this point, {\tt MESA} is ready to be installed, see Section 
\ref{sec:install}.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Install MESA
%%%%%%%%%%%%%%%%
\subsection{Install {\tt MESA}}
\label{sec:install}
If the environment variables were added to the {\tt .bashrc} (or equivalent) 
file, do not forget to source that file before continuing. Now {\tt MESA} 
is ready to be installed. Change directories to the {\tt mesa} directory. 
Run the {\tt install} script by typing {\tt ./install}. The permissions of the 
{\tt install} script may need to be changed in order for it to be executable.
This will untar many data tables used by the equation of state, network and 
chemistry modules. It will also compile and export all modules.

Following the execution of the {\tt ./install} script, {\tt MESA} has been 
installed and the following has completed:
\begin{itemize}
\item SDK only: Supporting software (compilers, linear algebra packages, 
etc.) has been unpacked and installed
\item Data tables have been untarred
\item Linear Algebra packages have been compiled and linked
\item All modules have been compiled (in parallel)
\item All modules have been exported to the {\tt mesa/lib} and 
{\tt mesa/include} directories
\end{itemize}

If you want to run {\tt MESA} in parallel, nothing further needs to be done. 
If you want to make sure all modules are compiled in serial, see Section 
\ref{sec:compile_wo_omp}, which addresses how to compile the modules.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Compile MESA
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Compile Modules Without OpenMP}
\label{sec:compile_wo_omp}

In the {\tt mesa/utils} directory, open the {\tt makefile\_header} file. 
Change the {\tt FCopenmp} flag ({\tt gfortran} default = {\tt -fopenmp}) to 
be empty. This will disable OpenMP for all modules. 

Anytime a change is made to a makefile or any source code, the module must 
be recompiled, which is a three step process involving the {\tt clean}, 
{\tt mk} and {\tt export} scripts provided in each module directory. The 
first step is to clean out any old files using the {\tt ./clean} script. 
Step two is to make the module using the {\tt ./mk} script. The last step is 
to export the {\tt .mod} files and the library to the right directories using 
the {\tt ./export} script. Section \ref{sec:compile_scripts} contains a 
simple script that is meant to help with compiling modules. It cleans, makes 
and exports every module and should be run in the top {\tt mesa/} directory.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Optional mesa/star OpenMP
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Optional: Turn Off {\tt mesa/star} OpenMP}
There are four other places to turn off OpenMP, but they are all contained 
in the {\tt mesa/star} directory, which is the 1-D stellar evolution code. If 
only using a few {\tt MESA} modules that do not include the {\tt mesa/star} 
stellar evolution code, then these last few places do not need to be 
modified in any way. 

In {\tt mesa/star/private/micro.f} there are three places 
to set the {\tt use\_omp} flag to False. They occur in the {\tt do\_eos}, 
{\tt do\_neu} and {\tt do\_net} routines. The fourth place to set the 
{\tt use\_omp} flag to False is contained in the {\tt do\_kap} routine in 
{\tt mesa/star/private/opacities.f}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Compiling MESA with an Outside Program
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Compiling {\tt MAESTRO} to Use {\tt MESA}}

Compiling code that depends on {\tt MESA} modules involves linking the code 
with the {\tt .mod} files and libraries that are generated when {\tt MESA} 
is compiled. After the {\tt export} script has been run in all compiled 
directories, the {\tt .mod} files and other supporting routines are 
copied to the {\tt mesa/include} directory while the libraries are copied to 
the {\tt mesa/lib} directory.

The {\tt MESA} libraries have the name {\tt lib(module-name).a}, e.g. 
{\tt libeos.a} or {\tt libnet.a}. The libraries need to be linked using the 
{\tt -L} flag with the {\tt mesa/lib} directory and a list of which libraries 
to load, e.g. {\tt -L\$(MESA\_DIR)/lib -leos -lnet -lnum}. {\tt MESA} 
{\tt .mod} files are linked to code using the {\tt -I} flag and the 
{\tt mesa/include} directory, e.g. {\tt -I\$(MESA\_DIR)/include}.

The order in which the libraries appear is important. If compilation errors 
related to undefined references to a particular {\tt MESA} module such as 
{\tt eos\_lib} occur, check to make sure that the libraries are in the correct 
order. Of course it is also possible that an undefined reference really does 
exist.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% How to setup/envoke/shutdown MESA modules
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Using {\tt MESA} Modules}

This section describes what needs to take place in order to use 
{\tt MESA} modules such as setting up the module, invoking certain routines 
and shutting down the module. This discussion will only include information 
pertaining to the network and equation of state modules.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% EOS
%%%%%%
\subsection{Equation of State}

%-------------------------------------------------------------------------
\subsubsection{Set Up}

There are several steps to setting up the equation of state:
\begin{enumerate}
\item Constant Initialization: This is done by calling the {\tt const\_init} 
subroutine

\item Data Directory: Define where the {\tt mesa/data} directory is: This can 
be done by using the {\tt MESA\_DIR} environment variable that was set 
at installation

\item Chem Initialization: This is done by calling the {\tt chem\_init} 
subroutine: {\tt call chem\_init(data\_dir, `isotopes.data\_real', ierr)}. 
The second argument can also be {\tt `isotopes.data\_approx'}. The ``real'' 
file contains actual values for 
atomic quantities such as atomic weight. The ``approx'' file contains 
approximate values for these quantities, e.g. the mass of the proton and 
neutron are both equal to 1.0. The {\tt ierr} argument is an integer that 
holds the exit status of the subroutine, non-zero means there was an error

\item EOS Initialization: This is done by calling the {\tt eos\_init} 
subroutine: {\tt call eos\_init(data\_dir, eos\_file\_prefix, use\_cache, 
ierr)}. {\tt eos\_file\_prefix} is a character variable and should be 
declared and set equal to `mesa'. {\tt use\_cache} is a logical variable that 
also needs to be declared and set equal to `true'

\item Handle: Obtain a handle associated with the equation of state by 
calling the {\tt alloc\_eos\_handle} function: 
{\tt handle = alloc\_eos\_handle(ierr)}. {\tt handle} should be declared as an 
integer
\end{enumerate}

%-------------------------------------------------------------------------
\subsubsection{Calling the EOS}

The call to the generic {\tt MESA} equation of state looks like:
\begin{lstlisting}[language=fortran,mathescape=false]
  call eosDT_get(handle_eos, Z, X, abar, zbar, nspec, chem_id, net_iso, Xa, &
                 rho, log10(rho), temp, log10(temp), res, d_dlnd, d_dlnT, ierr)
\end{lstlisting}
Where {\tt Z} is the metallicity, {\tt X} is the mass fraction of hydrogen, 
{\tt abar} is the average atomic weight, {\tt zbar} is the average atomic 
number, {\tt nspec} is the number of species in the network, {\tt Xa} is 
the array of mass fractions. See Section \ref{sec:mapping} for a complete 
description of {\tt chem\_id} and {\tt net\_iso}. The results of the EOS call 
are stored in the arrays {\tt res}, {\tt d\_dlnd} and {\tt d\_dlnT}, which 
are all of size {\tt num\_eos\_basic\_results}. The {\tt d\_dlnd} and 
{\tt d\_dlnT} arrays are the derivatives of the {\tt res} array with respect 
to density and temperature, respectively. The values held in the {\tt res} 
array are shown in Table \ref{tab:res}.

\begin{table}[h]
\begin{center}
\begin{tabular}{ccc}
Output & Definition & Units \\ \hline
$P_{gas}$ & gas pressure & ergs cm$^{-3}$ \\
$E$ & internal energy & ergs g$^-{1}$ \\
$S$ & entropy per gram & ergs g$^{-1}$ K$^{-1}$ \\
$dE/d\rho|_T$ & & ergs cm$^3$ g$^{-2}$ \\
$C_V$ & specific heat at constant V $\equiv 1/\rho$ & ergs g$^{-1}$ K$^{-1}$ \\
$dS/d\rho|_T$ & & ergs cm$^3$ g$^{-2}$ K$^{-1}$ \\
$dS/dT|_\rho$ & & ergs g$^{-1}$ K$^{-2}$ \\
$\chi_\rho$ & $\equiv d{\rm ln}P/d{\rm ln}\rho|_T$ & none \\
$\chi_T$ & $\equiv d{\rm ln}P/d{\rm ln}T|_\rho$ & none \\
$C_P$ & specific heat at constant pressure & ergs g$^{-1}$ K$^{-1}$ \\
$\nabla_{ad}$ & adiabatic T gradient with pressure & none \\
$\Gamma_1$ & $\equiv d{\rm ln}P/d{\rm ln}\rho|_S$ & none \\
$\Gamma_3$ & $\equiv d{\rm ln}T/d{\rm ln}\rho|_S + 1$ & none \\
$\eta$ & ratio of electron chemical potential to $k_BT$ & none \\
$\mu$ & mean molecular weight per gas particle & none \\
$1/\mu_e$ & mean number of free electrons per nucleon & none \\ \hline
\end{tabular}
\caption{{\tt eos} output quantities and units}
\label{tab:res}
\end{center}
\end{table}

It is possible to call the HELM equation of state directly. This is done as 
follows:
\begin{lstlisting}[language=fortran,mathescape=false]
  call eos_get_helm_results(handle_eos, Z, X, abar, zbar, dens, log10(dens), &
                            temp, log10(temp), helm_res, ierr)
\end{lstlisting}
The {\tt helm\_res} array is of size {\tt num\_helm\_results} and holds all 
of the output 
values from the call, including all derivatives. 
There are slight differences between the generic EOS call and the HELM EOS 
call: HELM does not need the mass fractions or the maps between 
{\tt MESA} isotope indices and the mass fraction array indices ({\tt chem\_id} 
and {\tt net\_iso}, see Section \ref{sec:mapping}). The HELM EOS returns on 
the order of 400 different quantities which include the values shown in 
Table \ref{tab:res} as well as quantities such as $dP/d(abar)$ and 
$dE/d(zbar)$. 

%-------------------------------------------------------------------------
\subsubsection{Shutdown the EOS}

There are two steps to shutting down the equation of state:
\begin{enumerate}
\item Free the handle: Call the {\tt free\_eos\_handle} subroutine: 
{\tt call free\_eos\_handle(handle\_eos)}.

\item Shutdown: Call the {\tt eos\_shutdown} subroutine: 
{\tt call eos\_shutdown}
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Mapping from MAESTRO to MESA using chem_id and net_iso
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Mapping {\tt MAESTRO} to {\tt MESA}}
\label{sec:mapping}

{\tt MAESTRO} and {\tt MESA} refer to isotopes in a very similar way; using 
short names of the isotopes such as he4 and ni56. {\tt MAESTRO} 
tends to use capital letters (He4 and Ni56) while {\tt MESA} uses 
lowercase letters (he4 and ni56). A simple routine to convert from 
uppercase to lowercase will be needed.

In order to use {\tt MESA} modules and obtain the correct result, it is 
important to make sure that {\tt MESA} and {\tt MAESTRO} agree on what 
isotope each entry in the mass fraction array refers to. This is done by 
using the {\tt chem\_id} and {\tt net\_iso} variables. Both variables are 
integer pointer arrays of size {\tt num\_chem\_isos}, which is defined in one 
of the chemistry modules. {\tt chem\_id} maps from an isotope in the current 
net to the {\tt MESA} data table that holds the properties of that isotope. 
{\tt net\_iso} is used to map from the {\tt MESA} data tables to an isotope 
in the current network. 

For example, assume there are 3 isotopes in the current net: H1, Be7 and C12. 
The {\tt chem\_id} array should look like this: {\tt chem\_id(:) = -1, 
chem\_id(1) = 2, chem\_id(2) = 18, chem\_id(3) = 38}, and the 
{\tt net\_iso} array should look like this: {\tt net\_iso(:) = -1, 
net\_iso(2) = 1, net\_iso(18) = 2, net\_iso(38) = 3}. Where 2, 18 and 38 
refer to the {\tt MESA} data table location of H1, Be7 and C12, respectively.

Care should be taken when setting up these arrays in order to avoid 
disagreement between the {\tt MESA} mass fraction array and the {\tt MAESTRO} 
mass fraction array. 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Network
%%%%%%%%%%
\subsection{Network}

%-------------------------------------------------------------------------
\subsubsection{Set Up}

There are significantly more steps involved when initializing the {\tt MESA} 
network. Here is a brief outline of what needs to happen:
\begin{enumerate}
\item Get the {\tt MESA} and {\tt AstroDev} directory locations
\item Convert the short species names to {\tt MESA} format
\item Generate a file that will tell {\tt MESA} which reactions to add based 
on the isotopes in the current network ({\tt call which\_reactions})
\item Initialize {\tt MESA} {\tt chem}, {\tt weak} and {\tt reaclib} modules
\item Setup the map between {\tt MAESTRO} and {\tt MESA}, see Section 
\ref{sec:mapping} for a more in depth explanation
\item Initialize {\tt MESA} {\tt rates} and {\tt net} modules
\item Allocate a network handle
\item Call the {\tt net\_start\_def}, {\tt read\_net\_file}, {\tt net\_ptr} 
and {\tt net\_finish\_def}
\item Output a log file containing the species in the current net and which 
reactions were chosen by {\tt MESA} based on those species
\item Set {\tt which\_rates\_choice} and allocate {\tt which\_rates} array
\item Set entire array equal to {\tt which\_rates\_choice} and call 
{\tt net\_set\_which\_rates}
\item Initialize which linear algebra solver to use
\end{enumerate}

After calling {\tt net\_set\_which\_rates}, the setup routine should call 
{\tt net\_setup\_tables}. This is based on the example 
{\tt one\_zone\_burn.f} program distributed with the {\tt MESA} source code. 
I have not had a successful burn if the {\tt net\_setup\_tables} routine is 
called at setup in the {\tt setup\_mesa\_net.f90} program. I do have 
successful burns when it is placed within the burner program 
{\tt Do\_One\_Zone\_Burn.f90}. To prevent the setup routine from being called 
everytime a burn is to take place, I added a logical flag that signals if the 
{\tt net\_setup\_tables} routine has alredy been called.

%-------------------------------------------------------------------------
\subsubsection{Calling the Network}

Calling the {\tt MESA} network from within the {\tt MAESTRO} wrapper starts 
with calling a modified {\tt MESA} wrapper:
\begin{lstlisting}[language=fortran,mathescape=false]
  results => Xout

  call Do_One_Zone_Burn(dens, temp, dt, Xin, burn_ergs, Xout, results)
\end{lstlisting}
The inputs are density, temperature, how long to burn and starting mass 
fractions. The outputs are the energy generation rate ({\tt burn\_ergs}) 
in units of ergs g$^{-1}$ s$^{-1}$, the final mass fractions and a pointer 
to the final mass fractions ({\tt results}). The pointer is necessary 
because the {\tt MESA} network works with pointers while {\tt MAESTRO} 
uses standard arrays.

To calculate {\tt rho\_omegadot} ($\rho \dot{\omega}$) and {\tt rho\_Hnuc} 
($\rho H_{{\rm nuc}}$) the following code can be used after a call to 
{\tt Do\_One\_Zone\_Burn}:
\begin{lstlisting}[language=fortran,mathescape=false]
  do i=1, nspec
     dX = Xout(i) - Xin(i)
     rho_omegadot(i) = dens * dX / dt
  enddo

  rho_Hnuc = dens * burn_ergs
\end{lstlisting}
There is a support routine called {\tt burn\_solout} that is passed to the 
{\tt MESA} burner. This routine is called after every step of the burn and 
is responsible for calculating the energy generation rate. {\tt burn\_solout} 
is passed as an argument to the {\tt net\_1\_zone\_burn} subroutine (the 
{\tt MESA} burner) and as a result the actual call to the {\tt burn\_solout} 
routine is buried deep within the {\tt MESA} source code.

%-------------------------------------------------------------------------
\subsubsection{Shutdown the Network}

Shutting down the {\tt MESA} network requires only one step:
\begin{enumerate}
\item Deallocate {\tt chem\_id}, {\tt net\_iso} and {\tt which\_rates}
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Compile MESA on Hopper, a Cray XE6 machine
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Install {\tt MESA} on Hopper}
\label{sec:hopper_install}
\input hopper_compile


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Begin the appendix, where all the code examples are
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input appendix

\end{document}

